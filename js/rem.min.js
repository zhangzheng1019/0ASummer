!function(e,t){function i(){var t=n.getBoundingClientRect().width;n.getBoundingClientRect().height;t/l>540&&(t=540*l);var i=t/10;n.style.fontSize=i+"px",m.rem=e.rem=i}var o,a=e.document,n=a.documentElement,r=a.querySelector('meta[name="viewport"]'),s=a.querySelector('meta[name="flexible"]'),l=0,d=0,m=t.flexible||(t.flexible={});if(console.log(a),r){console.warn("将根据已有的meta标签来设置缩放比例");var p=r.getAttribute("content").match(/initial\-scale=([\d\.]+)/);p&&(d=parseFloat(p[1]),l=parseInt(1/d))}else if(s){var c=s.getAttribute("content");if(c){var u=c.match(/initial\-dpr=([\d\.]+)/),h=c.match(/maximum\-dpr=([\d\.]+)/);u&&(l=parseFloat(u[1]),d=parseFloat((1/l).toFixed(2))),h&&(l=parseFloat(h[1]),d=parseFloat((1/l).toFixed(2)))}}if(!l&&!d){e.navigator.appVersion.match(/android/gi);var f=e.navigator.appVersion.match(/iphone/gi),v=f&&e.navigator.appVersion.match(/OS 9_3/),g=e.devicePixelRatio;d=1/(l=f&&!v?g>=3&&(!l||l>=3)?3:g>=2&&(!l||l>=2)?2:1:1)}if(n.setAttribute("data-dpr",l),!r)if((r=a.createElement("meta")).setAttribute("name","viewport"),r.setAttribute("content","initial-scale="+d+", maximum-scale="+d+", minimum-scale="+d+", user-scalable=no"),n.firstElementChild)n.firstElementChild.appendChild(r);else{var x=a.createElement("div");x.appendChild(r),a.write(x.innerHTML)}e.addEventListener("resize",function(){clearTimeout(o),o=setTimeout(i,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(o),o=setTimeout(i,300))},!1),"complete"===a.readyState?a.body.style.fontSize=12*l+"px":a.addEventListener("DOMContentLoaded",function(e){a.body.style.fontSize=12*l+"px"},!1),i(),m.dpr=e.dpr=l,m.refreshRem=i,m.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},m.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={})),function(){var e={},t=navigator.userAgent,i=t.match(/(Android);?[\s\/]+([\d.]+)?/),o=!t.match(/(iPad).*OS\s([\d_]+)/)&&t.match(/(iPhone\sOS)\s([\d_]+)/);i&&(e.os="android",e.android=!0,e.osVersion=i[2],e.androidChrome=t.toLowerCase().indexOf("chrome")>=0),o&&(e.os="ios",e.ios=!0,e.osVersion=o[2].replace(/_/g,".")),e.ios&&e.osVersion&&t.indexOf("Version/")>=0&&"10"===e.osVersion.split(".")[0]&&(e.osVersion=t.toLowerCase().split("version/")[1].split(" ")[0]);var a=[];if(e.pixelRatio=window.devicePixelRatio||1,a.push("pixel-ratio-"+Math.floor(e.pixelRatio)),e.pixelRatio>=2&&a.push("retina"),e.os&&(a.push(e.os,e.os+"-"+e.osVersion.split(".")[0],e.os+"-"+e.osVersion.replace(/\./g,"-")),"ios"===e.os))for(var n=parseInt(e.osVersion.split(".")[0],10)-1;n>=6;n--)a.push("ios-gt-"+n);a.length>0&&(document.documentElement.className=a.join(" "))}();